(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22a10a"],{dfb4:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"page-des"},[e._v("使用ObjLoader加载器加载人物模型")]),r("div",{ref:"objLoader",staticClass:"three-area"})])},s=[],n=(r("d81d"),r("5a89")),a=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,r=/^usemtl /,i=/^usemap /,s=new n["U"],a=new n["U"],o=new n["U"],l=new n["U"],h=new n["U"];function c(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"===typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var i=this.vertices,s=this.object.geometry.vertices;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var i=this.normals,s=this.object.geometry.normals;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,t,r){var i=this.vertices,n=this.object.geometry.normals;s.fromArray(i,e),a.fromArray(i,t),o.fromArray(i,r),h.subVectors(o,a),l.subVectors(s,a),h.cross(l),h.normalize(),n.push(h.x,h.y,h.z),n.push(h.x,h.y,h.z),n.push(h.x,h.y,h.z)},addColor:function(e,t,r){var i=this.colors,s=this.object.geometry.colors;void 0!==i[e]&&s.push(i[e+0],i[e+1],i[e+2]),void 0!==i[t]&&s.push(i[t+0],i[t+1],i[t+2]),void 0!==i[r]&&s.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){var i=this.uvs,s=this.object.geometry.uvs;s.push(i[e+0],i[e+1]),s.push(i[t+0],i[t+1]),s.push(i[r+0],i[r+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,s,n,a,o,l){var h=this.vertices.length,c=this.parseVertexIndex(e,h),u=this.parseVertexIndex(t,h),d=this.parseVertexIndex(r,h);if(this.addVertex(c,u,d),this.addColor(c,u,d),void 0!==a&&""!==a){var m=this.normals.length;c=this.parseNormalIndex(a,m),u=this.parseNormalIndex(o,m),d=this.parseNormalIndex(l,m),this.addNormal(c,u,d)}else this.addFaceNormal(c,u,d);if(void 0!==i&&""!==i){var p=this.uvs.length;c=this.parseUVIndex(i,p),u=this.parseUVIndex(s,p),d=this.parseUVIndex(n,p),this.addUV(c,u,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,i=e.length;r<i;r++){var s=this.parseVertexIndex(e[r],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,s=0,n=e.length;s<n;s++)this.addVertexLine(this.parseVertexIndex(e[s],r));var a=0;for(n=t.length;a<n;a++)this.addUVLine(this.parseUVIndex(t[a],i))}};return e.startObject("",!1),e}function u(e){n["x"].call(this,e),this.materials=null}return u.prototype=Object.assign(Object.create(n["x"].prototype),{constructor:u,load:function(e,t,r,i){var s=this,a=new n["n"](this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(r){try{t(s.parse(r))}catch(n){i?i(n):console.error(n),s.manager.itemError(e)}}),r,i)},setMaterials:function(e){return this.materials=e,this},parse:function(s){var a=new c;-1!==s.indexOf("\r\n")&&(s=s.replace(/\r\n/g,"\n")),-1!==s.indexOf("\\\n")&&(s=s.replace(/\\\n/g,""));for(var o=s.split("\n"),l="",h="",u=0,d=[],m="function"===typeof"".trimLeft,p=0,f=o.length;p<f;p++)if(l=o[p],l=m?l.trimLeft():l.trim(),u=l.length,0!==u&&(h=l.charAt(0),"#"!==h))if("v"===h){var v=l.split(/\s+/);switch(v[0]){case"v":a.vertices.push(parseFloat(v[1]),parseFloat(v[2]),parseFloat(v[3])),v.length>=7?a.colors.push(parseFloat(v[4]),parseFloat(v[5]),parseFloat(v[6])):a.colors.push(void 0,void 0,void 0);break;case"vn":a.normals.push(parseFloat(v[1]),parseFloat(v[2]),parseFloat(v[3]));break;case"vt":a.uvs.push(parseFloat(v[1]),parseFloat(v[2]));break}}else if("f"===h){for(var g=l.substr(1).trim(),b=g.split(/\s+/),w=[],j=0,y=b.length;j<y;j++){var x=b[j];if(x.length>0){var V=x.split("/");w.push(V)}}var L=w[0];for(j=1,y=w.length-1;j<y;j++){var I=w[j],U=w[j+1];a.addFace(L[0],I[0],U[0],L[1],I[1],U[1],L[2],I[2],U[2])}}else if("l"===h){var z=l.substring(1).trim().split(" "),C=[],A=[];if(-1===l.indexOf("/"))C=z;else for(var F=0,M=z.length;F<M;F++){var O=z[F].split("/");""!==O[0]&&C.push(O[0]),""!==O[1]&&A.push(O[1])}a.addLineGeometry(C,A)}else if("p"===h){g=l.substr(1).trim();var E=g.split(" ");a.addPointGeometry(E)}else if(null!==(d=e.exec(l))){var _=(" "+d[0].substr(1).trim()).substr(1);a.startObject(_)}else if(r.test(l))a.object.startMaterial(l.substring(7).trim(),a.materialLibraries);else if(t.test(l))a.materialLibraries.push(l.substring(7).trim());else if(i.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===h){if(d=l.split(" "),d.length>1){var H=d[1].trim().toLowerCase();a.object.smooth="0"!==H&&"off"!==H}else a.object.smooth=!0;var P=a.object.currentMaterial();P&&(P.smooth=a.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}a.finalize();var D=new n["s"];D.materialLibraries=[].concat(a.materialLibraries);var N=!(1===a.objects.length&&0===a.objects[0].geometry.vertices.length);if(!0===N)for(p=0,f=a.objects.length;p<f;p++){var R=a.objects[p],S=R.geometry,k=R.materials,G="Line"===S.type,J="Points"===S.type,B=!1;if(0!==S.vertices.length){var T=new n["f"];T.setAttribute("position",new n["o"](S.vertices,3)),S.normals.length>0&&T.setAttribute("normal",new n["o"](S.normals,3)),S.colors.length>0&&(B=!0,T.setAttribute("color",new n["o"](S.colors,3))),!0===S.hasUVIndices&&T.setAttribute("uv",new n["o"](S.uvs,2));for(var W,X=[],q=0,Y=k.length;q<Y;q++){var $=k[q],K=$.name+"_"+$.smooth+"_"+B;P=a.materials[K];if(null!==this.materials)if(P=this.materials.create($.name),!G||!P||P instanceof n["v"]){if(J&&P&&!(P instanceof n["M"])){var Q=new n["M"]({size:10,sizeAttenuation:!1});n["B"].prototype.copy.call(Q,P),Q.color.copy(P.color),Q.map=P.map,P=Q}}else{var Z=new n["v"];n["B"].prototype.copy.call(Z,P),Z.color.copy(P.color),P=Z}void 0===P&&(P=G?new n["v"]:J?new n["M"]({size:1,sizeAttenuation:!1}):new n["H"],P.name=$.name,P.flatShading=!$.smooth,P.vertexColors=B,a.materials[K]=P),X.push(P)}if(X.length>1){for(q=0,Y=k.length;q<Y;q++){$=k[q];T.addGroup($.groupStart,$.groupCount,q)}W=G?new n["w"](T,X):J?new n["L"](T,X):new n["D"](T,X)}else W=G?new n["w"](T,X[0]):J?new n["L"](T,X[0]):new n["D"](T,X[0]);W.name=R.name,D.add(W)}}else if(a.vertices.length>0){P=new n["M"]({size:1,sizeAttenuation:!1}),T=new n["f"];T.setAttribute("position",new n["o"](a.vertices,3)),a.colors.length>0&&(T.setAttribute("color",new n["o"](a.colors,3)),P.vertexColors=!0);var ee=new n["L"](T,P);D.add(ee)}return D}}),u}(),o={data:function(){return{camera:null,scene:null,renderer:null,mesh:null,mouseX:0,mouseY:0,windowHalfX:0,windowHalfY:0}},mounted:function(){this.init(),this.animate()},beforeDestroy:function(){this.camera&&(this.camera=null),this.scene&&(this.scene=null),this.renderer&&(this.renderer=null),this.mesh&&(this.mesh=null)},methods:{init:function(){var e=this,t=e.$refs.objLoader;e.windowHalfX=t.clientWidth/2,e.windowHalfY=t.clientHeight/2,this.scene=new n["O"],this.camera=new n["J"](60,t.clientWidth/t.clientHeight,1,2e3),this.camera.position.z=200,this.scene=new n["O"],this.scene.add(this.camera);var r=new n["a"](1052720);this.scene.add(r);var i=new n["j"](16772829);i.position.set(0,0,1),this.scene.add(i);var s=new n["z"];s.onProgress=function(e,t,r){console.log(e,t,r)};var o=new n["R"],l=new n["u"](s);l.load("textureImage/UV_Grid_Sm.jpg",(function(e){o.image=e,o.needsUpdate=!0}));l=new a(s);l.load("/objModel/male02.obj",(function(t){t.traverse((function(e){e instanceof n["D"]&&(e.material.map=o)})),t.position.y=-80,e.scene.add(t)}),h,c);var h=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}},c=function(e){};e.renderer=new n["X"]({antialias:!0}),e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(t.clientWidth,t.clientHeight),t.appendChild(e.renderer.domElement)},animate:function(){this.renderer.clear(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}}},l=o,h=r("2877"),c=Object(h["a"])(l,i,s,!1,null,null,null);t["default"]=c.exports}}]);